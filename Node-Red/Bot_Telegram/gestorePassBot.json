[{"id":"94c12c0a.c6c24","type":"tab","label":"PasswordBot","disabled":false,"info":""},{"id":"ecf6c11f.41475","type":"chatbot-telegram-receive","z":"94c12c0a.c6c24","bot":"fdab9580.88f348","botProduction":"","x":130,"y":420,"wires":[["a21a4f32.e240d"]]},{"id":"5e259175.7b63e","type":"chatbot-telegram-send","z":"94c12c0a.c6c24","bot":"fdab9580.88f348","botProduction":"","track":false,"passThrough":false,"outputs":0,"x":1330,"y":240,"wires":[]},{"id":"2178ce97.8aa8d2","type":"comment","z":"94c12c0a.c6c24","name":"code casual string","info":"var tmpPsw  = new Array(15);\nvar pass = \"\";\nvar charPsw = \"abcdefghiljklmnopqrstuvwxyz\" + \n            \"ABCDEFGHILJKLMNOPQRSTUVWXYZ\"+\n            \"1234567890\"+\n            \" `!?$?%^&*()_-+={[}]:;@'~#<,>.?/\";\n            \nfor(var i = 0; i<tmpPsw.length; i++){\n    tmpPsw [i] = charPsw.charAt(Math.random()*charPsw.length + 1);\n    pass += tmpPsw[i];\n}\n\nmsg.payload = pass;\n\nreturn msg;","x":190,"y":120,"wires":[]},{"id":"639f5070.1e0a5","type":"sqlite","z":"94c12c0a.c6c24","mydb":"48aca95c.033e68","sqlquery":"msg.topic","sql":"","name":"passdb","x":760,"y":240,"wires":[["2cf99602.dd86fa","43d3e013.25881"]]},{"id":"2cf99602.dd86fa","type":"function","z":"94c12c0a.c6c24","name":"sendMsgTelegram","func":"var telegramMsg = \"ECCO LE TUE PASSWORD \\n\\n\";\n\nfor(var i = 0; i < msg.payload.length; i++){\n    telegramMsg += msg.payload[i].id + \") \" +msg.payload[i].name + \": \" + msg.payload[i].pass + \"\\n\"; \n}\n\nmsg.payload = telegramMsg;\n\nreturn msg;","outputs":1,"noerr":0,"x":950,"y":200,"wires":[["3f61b3ae.f62e7c"]]},{"id":"3f61b3ae.f62e7c","type":"chatbot-message","z":"94c12c0a.c6c24","name":"","message":[{"message":"🔒{{payload}}\n\n⬇️PREMI QUI⬇️\n           /start"}],"language":"","x":1130,"y":240,"wires":[["5e259175.7b63e"]]},{"id":"a001843c.3f1338","type":"function","z":"94c12c0a.c6c24","name":"select query","func":"msg.topic = \"SELECT *\"+\n            \"FROM password;\"\nreturn msg;","outputs":1,"noerr":0,"x":590,"y":260,"wires":[["639f5070.1e0a5"]]},{"id":"a21a4f32.e240d","type":"chatbot-inline-buttons","z":"94c12c0a.c6c24","name":"","buttons":[{"type":"postback","label":"Visualizza Password","value":"visualizza_pass","answer":"","alert":false,"style":""},{"type":"newline"},{"type":"postback","label":"Genera Password Casuale","value":"genera_pass_cas","answer":"","alert":false,"style":""},{"type":"newline"},{"type":"postback","label":"Genera Password Manualmente","value":"genera_pass_man","answer":"","alert":false,"style":""},{"type":"newline"},{"type":"postback","label":"Elimina Password","value":"elimina_pass","answer":"","alert":false,"style":""}],"message":"COSA VUOI FARE?","x":160,"y":300,"wires":[["a8b2a7f.33cce58"]]},{"id":"606f1804.13ce38","type":"switch","z":"94c12c0a.c6c24","name":"","property":"payload.content","propertyType":"msg","rules":[{"t":"eq","v":"visualizza_pass","vt":"str"},{"t":"eq","v":"genera_pass_cas","vt":"str"},{"t":"eq","v":"genera_pass_man","vt":"str"},{"t":"eq","v":"elimina_pass","vt":"str"}],"checkall":"true","repair":false,"outputs":4,"x":350,"y":460,"wires":[["a001843c.3f1338"],["14476bb2.c5b964"],["ddb26a3c.63b518"],["d39bc0b7.d824d"]]},{"id":"a8b2a7f.33cce58","type":"chatbot-telegram-send","z":"94c12c0a.c6c24","bot":"fdab9580.88f348","botProduction":"","track":true,"passThrough":false,"outputs":1,"x":270,"y":180,"wires":[["606f1804.13ce38"]]},{"id":"a2355b63.7efb08","type":"function","z":"94c12c0a.c6c24","name":"generatePswInsertQuery","func":"var dimPsw = 12;\nvar pass = \"\";\nvar charPsw = \"abcdefghiljklmnopqrstuvwxyz\" + \n            \"ABCDEFGHILJKLMNOPQRSTUVWXYZ\"+\n            \"1234567890\"+\n            \" `!?$?%^&*()_-+={[}]:;@'~#<,>.?/\";\n            \nfor(var i = 0; i < dimPsw; i++){\n    pass += charPsw.charAt(Math.random()*charPsw.length + 1);\n}\n\nvar name = msg.payload.content;\n\nmsg.topic = \"INSERT INTO password(name,pass)\" +\n            \"VALUES('\" + name + \"','\"+ pass +\"');\"\n\n\nreturn msg;  \n\n","outputs":1,"noerr":0,"x":1030,"y":380,"wires":[["3d263010.7ad6a"]]},{"id":"899c5f05.84dfd","type":"comment","z":"94c12c0a.c6c24","name":"GESTIONE PASSWORD BOT","info":"","x":700,"y":40,"wires":[]},{"id":"3d263010.7ad6a","type":"sqlite","z":"94c12c0a.c6c24","mydb":"48aca95c.033e68","sqlquery":"msg.topic","sql":"","name":"passdb","x":1240,"y":320,"wires":[["3d8a6b82.3175f4"]]},{"id":"2e79e747.935638","type":"debug","z":"94c12c0a.c6c24","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1050,"y":320,"wires":[]},{"id":"14476bb2.c5b964","type":"chatbot-message","z":"94c12c0a.c6c24","name":"","message":[{"message":"Inserisci il nome della Password che vuoi generare"},{"message":"Come si chiama la Password che vuoi generare?"}],"language":"","x":570,"y":380,"wires":[["238fb3e7.b63a7c"]]},{"id":"ec2ed0e1.5493c","type":"comment","z":"94c12c0a.c6c24","name":"insert query","info":"INSERT INTO table (column1,column2 ,..)\nVALUES( value1,\tvalue2 ,...);","x":990,"y":100,"wires":[]},{"id":"eae6c825.646468","type":"comment","z":"94c12c0a.c6c24","name":"struttura tabella","info":"password\n\nid INTEGER PRIMARY KEY\nname TEXT NOT NULL\npass TEXT NOT NULL","x":420,"y":120,"wires":[]},{"id":"238fb3e7.b63a7c","type":"chatbot-telegram-send","z":"94c12c0a.c6c24","bot":"fdab9580.88f348","botProduction":"","track":true,"passThrough":false,"outputs":1,"x":770,"y":380,"wires":[["2e79e747.935638","a2355b63.7efb08"]]},{"id":"43d3e013.25881","type":"debug","z":"94c12c0a.c6c24","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":810,"y":300,"wires":[]},{"id":"90fb0849.46b6d8","type":"inject","z":"94c12c0a.c6c24","name":"selectQuery","topic":"select * from password","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":550,"y":200,"wires":[["639f5070.1e0a5"]]},{"id":"3d8a6b82.3175f4","type":"chatbot-message","z":"94c12c0a.c6c24","name":"","message":[{"message":"👨‍💻PASSWORD GENERATA👨‍💻\n\n⬇️PREMI QUI⬇️\n         /start"}],"language":"","x":1430,"y":360,"wires":[["90719902.aa0b78"]]},{"id":"90719902.aa0b78","type":"chatbot-telegram-send","z":"94c12c0a.c6c24","bot":"fdab9580.88f348","botProduction":"","track":false,"passThrough":false,"outputs":0,"x":1630,"y":280,"wires":[]},{"id":"388d2876.ebb4c8","type":"debug","z":"94c12c0a.c6c24","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":550,"y":740,"wires":[]},{"id":"ddb26a3c.63b518","type":"chatbot-message","z":"94c12c0a.c6c24","name":"","message":[{"message":"Inserisci il nome della Password che vuoi generare"},{"message":"Come si chiama la Password che vuoi generare?"}],"language":"","x":530,"y":460,"wires":[["abb1ea34.2d68e8"]]},{"id":"abb1ea34.2d68e8","type":"chatbot-telegram-send","z":"94c12c0a.c6c24","bot":"fdab9580.88f348","botProduction":"","track":true,"passThrough":false,"outputs":1,"x":690,"y":480,"wires":[["6bee293d.014178"]]},{"id":"dbdbb363.abc1d","type":"chatbot-message","z":"94c12c0a.c6c24","name":"","message":[{"message":"Inserisci la nuova password"},{"message":"Che password vuoi utilizzare?"}],"language":"","x":950,"y":560,"wires":[["10358821.148958"]]},{"id":"10358821.148958","type":"chatbot-telegram-send","z":"94c12c0a.c6c24","bot":"fdab9580.88f348","botProduction":"","track":true,"passThrough":false,"outputs":1,"x":1130,"y":480,"wires":[["2793647.df5f29c"]]},{"id":"2793647.df5f29c","type":"function","z":"94c12c0a.c6c24","name":"insertQuery","func":"var chat = msg.chat();\nvar name = chat.get('name');\n\nmsg.topic = \"INSERT INTO password(name,pass)\" +\n            \"VALUES('\" + name + \"','\"+ msg.payload.content +\"');\"\n\n\nreturn msg;  \n\n","outputs":1,"noerr":0,"x":1270,"y":420,"wires":[["9cb9d4f3.e8ace8"]]},{"id":"9cb9d4f3.e8ace8","type":"sqlite","z":"94c12c0a.c6c24","mydb":"48aca95c.033e68","sqlquery":"msg.topic","sql":"","name":"passdb","x":1460,"y":440,"wires":[["c4961b7d.54d798"]]},{"id":"c4961b7d.54d798","type":"chatbot-message","z":"94c12c0a.c6c24","name":"","message":[{"message":"👨‍💻PASSWORD GENERATA👨‍💻\n\n⬇️PREMI QUI⬇️\n         /start"}],"language":"","x":1650,"y":440,"wires":[["27abb5aa.2d490a"]]},{"id":"27abb5aa.2d490a","type":"chatbot-telegram-send","z":"94c12c0a.c6c24","bot":"fdab9580.88f348","botProduction":"","track":false,"passThrough":false,"outputs":0,"x":1650,"y":360,"wires":[]},{"id":"6bee293d.014178","type":"chatbot-parse","z":"94c12c0a.c6c24","name":"","parseType":"string","parseVariable":"name","x":840,"y":440,"wires":[["dbdbb363.abc1d"],[]]},{"id":"e3c558ad.12e3d8","type":"comment","z":"94c12c0a.c6c24","name":"delete query","info":"DELETE FROM table\nWHERE search_condition;\n\nes.\nDELETE FROM artists_backup\nWHERE artistid = 1;\n\nes.\nDELETE FROM artists_backup\nWHERE name LIKE '%Santana%';\n\n","x":1250,"y":120,"wires":[]},{"id":"d39bc0b7.d824d","type":"chatbot-message","z":"94c12c0a.c6c24","name":"","message":[{"message":"Digita il numero della password che vuoi eliminare"},{"message":"Quale password vuoi eliminare? digita il numero!"}],"language":"","x":474.2857360839844,"y":532.857177734375,"wires":[["90c12f7.7c178d"]]},{"id":"90c12f7.7c178d","type":"chatbot-telegram-send","z":"94c12c0a.c6c24","bot":"fdab9580.88f348","botProduction":"","track":true,"passThrough":false,"outputs":1,"x":530,"y":620,"wires":[["388d2876.ebb4c8","5e8892d1.190f1c"]]},{"id":"5e8892d1.190f1c","type":"function","z":"94c12c0a.c6c24","name":"deleteQuery","func":"idPsw = parseInt(msg.payload.content);\n\nmsg.topic = \"DELETE FROM password \" +\n            \"WHERE id = \" + idPsw + \";\" \nreturn msg;","outputs":1,"noerr":0,"x":830,"y":660,"wires":[["cfd8c3b4.2642f"]]},{"id":"ab628145.ae5ec","type":"chatbot-message","z":"94c12c0a.c6c24","name":"","message":[{"message":"🗑️PASSWORD ELIMINATA🗑️\n\n⬇️PREMI QUI⬇️\n           /start\n"}],"language":"","x":1260,"y":600,"wires":[["8565dc17.5f335"]]},{"id":"8565dc17.5f335","type":"chatbot-telegram-send","z":"94c12c0a.c6c24","bot":"fdab9580.88f348","botProduction":"","track":false,"passThrough":false,"outputs":0,"x":1510,"y":600,"wires":[]},{"id":"cfd8c3b4.2642f","type":"sqlite","z":"94c12c0a.c6c24","mydb":"48aca95c.033e68","sqlquery":"msg.topic","sql":"","name":"passdb","x":1160,"y":720,"wires":[["ab628145.ae5ec"]]},{"id":"fdab9580.88f348","type":"chatbot-telegram-node","z":"","botname":"PGMM_bot","usernames":"","providerToken":"","polling":"1000","store":"","log":"","debug":false,"webHook":"","connectMode":"polling"},{"id":"48aca95c.033e68","type":"sqlitedb","z":"","db":"C:\\Users\\MMorr\\Desktop\\iot\\DBpass\\passdb.db","mode":"RWC"}]